
@{
    ViewBag.Title = "RegistroSocial";
}



<form class="" style="width:100%">
    <div class="row mb-3">
        <div class="col-md-3">
            <label class="form-label">Fecha de Ingreso:</label>
            <input type="date" class="form-control" name="fecha_ingreso">
        </div>
        <div class="col-md-3">
            <label class="form-label">Fecha de Aplicación:</label>
            <input type="date" class="form-control" name="fecha_aplicacion">
        </div>
        <div class="col-md-3">
            <label class="form-label">Servicio:</label>
            <input type="text" class="form-control" name="servicio">
        </div>
        <div class="col-md-3">
            <label class="form-label">Cama:</label>
            <input type="text" class="form-control" name="cama">
        </div>
    </div>

    <h5 class="mt-3">I. Datos Generales</h5>

    <div class="row mb-3">
        <div class="col-md-3">
            <label class="form-label">Paciente:</label>
            <input type="text" class="form-control" name="paciente">
        </div>
        <div class="col-md-3">
            <label class="form-label">DNI:</label>
            <input type="text" class="form-control" name="dni">
        </div>
        <div class="col-md-3">
            <label class="form-label">Edad:</label>
            <input type="number" class="form-control" name="edad">
        </div>
        <div class="col-md-3">
            <label class="form-label">Estado Civil:</label>
            <select class="form-select" name="estado_civil">
                <option value="S">Soltero/a</option>
                <option value="CA">Casado/a</option>
                <option value="CO">Conviviente</option>
                <option value="SE">Separado/a</option>
                <option value="VI">Viudo/a</option>
                <option value="D">Divorciado/a</option>
            </select>
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-md-3">
            <label class="form-label">Grado de Instrucción:</label>
            <select class="form-select" name="grado_instruccion">
                <option value="IL">Iletrado/a</option>
                <option value="PC">Primaria Completa</option>
                <option value="PI">Primaria Incompleta</option>
                <option value="SC">Secundaria Completa</option>
                <option value="SI">Secundaria Incompleta</option>
                <option value="SU">Superior Universitaria</option>
                <option value="ST">Superior Técnica</option>
            </select>
        </div>
        <div class="col-md-3">
            <label class="form-label">Dirección:</label>
            <input type="text" class="form-control" name="direccion">
        </div>
        <div class="col-md-3">
            <label class="form-label">Celular PX:</label>
            <input type="tel" class="form-control" name="cel_px">
        </div>
        <div class="col-md-3">
            <label class="form-label">Ocupación:</label>
            <input type="text" class="form-control" name="ocupacion">
        </div>
    </div>

    <h5 class="mt-4">Responsables</h5>
    <div id="responsables-container">
        <div class="responsable mb-3 border p-3">
            <div class="row">
                <div class="col-md-3">
                    <label class="form-label">Ocupación:</label>
                    <input type="text" class="form-control" name="ocupacion_r[]">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Parentesco:</label>
                    <input type="text" class="form-control" name="parentesco_r[]">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Edad:</label>
                    <input type="number" class="form-control" name="edad_r[]">
                </div>
                <div class="col-md-3">
                    <label class="form-label">DNI:</label>
                    <input type="text" class="form-control" name="dni_r[]">
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-3">
                    <label class="form-label">Celular:</label>
                    <input type="tel" class="form-control" name="celular_r[]">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Grado de Instrucción:</label>
                    <select class="form-select" name="grado_instruccion_r[]" id="grado-instruccion" onchange="toggleExtraField(this)">
                        <option value="IL">Iletrado/a</option>
                        <option value="PC">Primaria Completa</option>
                        <option value="PI">Primaria Incompleta</option>
                        <option value="SC">Secundaria Completa</option>
                        <option value="SI">Secundaria Incompleta</option>
                        <option value="SU">Superior Universitaria</option>
                        <option value="ST">Superior Técnica</option>
                    </select>
                </div>
                <div class="col-md-3" id="extra-field-container" style="display: none;">
                    <div class="col-md-12">
                        <label class="form-label">Especificar:</label>
                        <input type="text" class="form-control" name="especificar_grado_r[]">
                    </div>
                </div>
            </div>
            <div class="row mt-2" id="extra-field-container" style="display: none;">
                <div class="col-md-12">
                    <label class="form-label">Especificar:</label>
                    <input type="text" class="form-control" name="especificar_grado_r[]">
                </div>
            </div>
            <button type="button" class="btn btn-danger mt-2 remove-responsable">Eliminar</button>
        </div>
    </div>
    
    <button type="button" class="btn btn-secondary" id="add-responsable">Agregar Responsable</button>

    <h5 class="mt-4">Modalidad de Ingreso</h5>
    <div class="row mb-1" style="margin-left:40px;margin-right:40px">
        <div class="col-md-3">
            <label><input type="radio" name="modalidad_ingreso" value="externo"> Consulta Externa</label><br>
        </div>
        <div class="col-md-3">
            <label><input type="radio" name="modalidad_ingreso" value="emergencia"> Emergencia (REF)</label>
        </div>
        <div class="col-md-3">
            <label><input type="radio" name="modalidad_ingreso" value="autoref"> Autoreferencia</label><br>
        </div>
        <div class="col-md-3">
            <label><input type="radio" name="modalidad_ingreso" value="cs"> Centro de Salud</label>
        </div>
    </div>

    <h5 class="">Tipo de Familia</h5>
    <div class="border p-3 mb-3">

        <div class="row mb-3" style="margin-left:40px;margin-right:40px">
            <div class="col-md-3">
                <label><input type="radio" name="tipo_familia" value="nuclear"> Familia Nuclear</label><br>
                <label><input type="radio" name="tipo_familia" value="monoparental"> Familia Monoparental</label><br>

            </div>
            <div class="col-md-3">

                <label><input type="radio" name="tipo_familia" value="extensa"> Familia Extensa</label><br>
                <label><input type="radio" name="tipo_familia" value="compuesta"> Familia Compuesta</label><br>
            </div>
            <div class="col-md-3">
                <label><input type="radio" name="tipo_familia" value="adoptiva_acogida"> Familia Adoptiva/Acogida</label><br>
                <label><input type="radio" name="tipo_familia" value="personas_mayores"> Familia de Personas Mayores</label><br>
            </div>
            <div class="col-md-3">

                <label><input type="radio" name="tipo_familia" value="homoparental"> Familia Homoparental</label><br>
                <label><input type="radio" name="tipo_familia" value="unipersonal"> Familia Unipersonal</label>
            </div>
        </div>

        <div class="mb-3" style="width:91% ;margin-left:40px;margin-right:40px">
            <label class="form-label">Observaciones:</label>
            <textarea class="form-control" name="observaciones" rows="2"></textarea>
        </div>

        <h5 class="mt-4" style="margin-left:40px;margin-right:40px">Acciones Realizadas</h5>
        <div class="row mb-3" style="margin-left:40px;margin-right:40px">
            <div class="col-md-6">
                <label><input type="checkbox" name="acciones_realizadas" value="entrevista"> Entrevista Social</label><br>
                <label><input type="checkbox" name="acciones_realizadas" value="consejeria"> Consejería/Orientación Social</label><br>
            </div>
            <div class="col-md-6">
                <label><input type="checkbox" name="acciones_realizadas" value="gestion"> Gestión Social</label><br>
                <label><input type="checkbox" name="acciones_realizadas" value="otros"> Otros</label>
            </div>
        </div>
    </div>
    <div class="mb-3" style="width:95%">
        <label class="form-label">Diagnóstico Social:</label>
        <textarea class="form-control" name="diagnostico_social" rows="2"></textarea>
    </div>


    <button type="submit" class="btn btn-success mb-3">Enviar</button>
</form>

<script>
    document.getElementById('add-responsable').addEventListener('click', function () {
        const contador = 0;
        const container = document.getElementById('responsables-container');
        const newResponsable = document.createElement('div');
        newResponsable.classList.add('responsable', 'mb-3', 'border', 'p-3');
        newResponsable.innerHTML = `
            <div class="row">
                <div class="col-md-3">
                    <label class="form-label">Ocupación:</label>
                    <input type="text" class="form-control" name="ocupacion_r[]">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Parentesco:</label>
                    <input type="text" class="form-control" name="parentesco_r[]">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Edad:</label>
                    <input type="number" class="form-control" name="edad_r[]">
                </div>
                <div class="col-md-3">
                    <label class="form-label">DNI:</label>
                    <input type="text" class="form-control" name="dni_r[]">
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-3">
                    <label class="form-label">Celular:</label>
                    <input type="tel" class="form-control" name="celular_r[]">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Grado de Instrucción:</label>
                    <select class="form-select" name="grado_instruccion_r[]" id="grado-instruccion" onchange="toggleExtraField(this)">
                        <option value="IL">Iletrado/a</option>
                        <option value="PC">Primaria Completa</option>
                        <option value="PI">Primaria Incompleta</option>
                        <option value="SC">Secundaria Completa</option>
                        <option value="SI">Secundaria Incompleta</option>
                        <option value="SU">Superior Universitaria</option>
                        <option value="ST">Superior Técnica</option>
                    </select>
                </div>
                <div class="col-md-3" id="extra-field-container" style="display: none;">
                    <div class="col-md-12">
                        <label class="form-label">Especificar:</label>
                        <input type="text" class="form-control" name="especificar_grado_r[]">
                    </div>
                </div>
            </div>
            <div class="row mt-2" id="extra-field-container${contador}" style="display: none;">
                <div class="col-md-12">
                    <label class="form-label">Especificar:</label>
                    <input type="text" class="form-control" name="especificar_grado_r[]">
                </div>
            </div>
            <button type="button" class="btn btn-danger mt-2 remove-responsable">Eliminar</button>
        `;
        contador += 1;
        container.appendChild(newResponsable);
    });

    document.getElementById('responsables-container').addEventListener('click', function (e) {
        if (e.target.classList.contains('remove-responsable')) {
            e.target.closest('.responsable').remove();
        }
    });
</script>

<script>
    function toggleExtraField(selectElement) {
        const value = selectElement.value;
        const extraFieldContainer = document.getElementById('extra-field-container');

        if (value === 'PI' || value === 'SI' || value === 'SU' || value === 'ST') {
            extraFieldContainer.style.display = 'block';
        } else {
            extraFieldContainer.style.display = 'none';
        }
    }
</script>